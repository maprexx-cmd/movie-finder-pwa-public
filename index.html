<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Movie Finder</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: radial-gradient(circle at top, #0f172a, #020617);
  color: #ffffff;
}

.container {
  max-width: 420px;
  margin: 40px auto;
  padding: 20px;
}

.card {
  background: #0b1220;
  border-radius: 18px;
  padding: 20px;
  box-shadow: 0 0 40px rgba(0,0,0,0.6);
}

h1 {
  font-size: 24px;
  margin-bottom: 16px;
}

label {
  display: flex;
  align-items: center;
  margin: 10px 0;
  font-size: 16px;
}

input[type="checkbox"] {
  margin-right: 10px;
  width: 20px;
  height: 20px;
}

button {
  width: 100%;
  margin-top: 20px;
  padding: 16px;
  border-radius: 30px;
  border: none;
  background: linear-gradient(90deg, #eaff00, #7CFF00);
  color: #0033cc;
  font-size: 18px;
  font-weight: bold;
  cursor: pointer;
}

button:active {
  transform: scale(0.98);
}

.result {
  margin-top: 30px;
  background: #0b1220;
  border-radius: 18px;
  padding: 20px;
  display: none;
}

.result h2 {
  font-size: 20px;
  margin-bottom: 10px;
}

.result p {
  font-size: 14px;
  opacity: 0.8;
}

.close-btn {
  margin-top: 20px;
  background: transparent;
  border: 1px solid #444;
  color: #ffffff;
  padding: 12px;
  border-radius: 20px;
  cursor: pointer;
}

/* Overlay finale */
.overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: black;
  opacity: 0;
  pointer-events: none;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  transition: opacity 0.8s ease;
  z-index: 999;
}

.overlay.active {
  opacity: 1;
  pointer-events: auto;
}

.overlay h2 {
  font-size: 26px;
  margin-bottom: 20px;
}

.overlay button {
  width: auto;
  padding: 14px 30px;
}
</style>
</head>

<body>

<div class="container">

  <div class="card">
    <h1>Cosa guardi oggi?</h1>

    <label>
      <input type="checkbox" value="35"> Comico
    </label>

    <label>
      <input type="checkbox" value="28"> Azione
    </label>

    <label>
      <input type="checkbox" value="10749"> Romantico
    </label>

    <button onclick="cercaFilm()">Cosa guardi oggi?</button>
  </div>

  <div class="result" id="result">
    <h2 id="movieTitle"></h2>
    <p id="movieOverview"></p>
    <button class="close-btn" onclick="chiudiRisultato()">Chiudi</button>
  </div>

</div>

<div class="overlay" id="overlay">
  <h2>Sta per iniziare il film</h2>
  <button onclick="chiudiApp()">Esci dall'app</button>
</div>

<script>
const API_KEY = "f8ecb75282e8dcea2d4845598cc7d030";

function cercaFilm() {
  const checked = document.querySelectorAll('input[type="checkbox"]:checked');
  if (checked.length === 0) return;

  const genres = Array.from(checked).map(cb => cb.value).join(",");

  const url = `https://api.themoviedb.org/3/discover/movie?api_key=${API_KEY}&with_genres=${genres}&language=it-IT&page=1`;

  fetch(url)
    .then(res => res.json())
    .then(data => {
      if (!data.results || data.results.length === 0) return;

      const film = data.results[Math.floor(Math.random() * data.results.length)];

      document.getElementById("movieTitle").innerText = film.title;
      document.getElementById("movieOverview").innerText = film.overview || "Trama non disponibile";

      document.getElementById("result").style.display = "block";
    });
}

function chiudiRisultato() {
  document.getElementById("result").style.display = "none";
  document.getElementById("overlay").classList.add("active");
}

function chiudiApp() {
  document.getElementById("overlay").classList.remove("active");
}
</script>

</body>
</html>
