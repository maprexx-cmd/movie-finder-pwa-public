<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Movie Finder</title>

<style>
body{
  margin:0;
  font-family:system-ui,-apple-system,BlinkMacSystemFont;
  background:radial-gradient(circle at top,#101828,#020617);
  color:#fff;
}
.container{
  max-width:420px;
  margin:auto;
  padding:20px;
}
.card{
  background:rgba(255,255,255,0.05);
  border-radius:18px;
  padding:20px;
  margin-bottom:20px;
}
h1{
  margin:0 0 10px 0;
}
.subtitle{
  opacity:0.7;
  margin-bottom:20px;
}
button{
  width:100%;
  padding:14px;
  border-radius:999px;
  border:none;
  font-size:16px;
  cursor:pointer;
}
.primary{
  background:linear-gradient(135deg,#d9ff3f,#7dff3f);
  color:#102a00;
  font-weight:600;
}
.secondary{
  background:transparent;
  border:1px solid rgba(255,255,255,0.2);
  color:#fff;
}
.genres label{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:10px;
}
.result{
  display:none;
}
.poster{
  width:100%;
  border-radius:12px;
  margin-bottom:10px;
}
.fade{
  position:fixed;
  inset:0;
  background:black;
  display:none;
  align-items:center;
  justify-content:center;
  color:white;
  font-size:22px;
  z-index:10;
}
</style>
</head>

<body>

<div class="container">

  <!-- HOME -->
  <div class="card" id="home">
    <h1>Movie Finder</h1>
    <div class="subtitle">Cosa vuoi guardare oggi?</div>
    <button class="primary" onclick="openBasic()">BASIC</button>
    <br><br>
    <button class="secondary" onclick="alert('Premium in arrivo')">PREMIUM</button>
  </div>

  <!-- BASIC -->
  <div class="card" id="basic" style="display:none">
    <h2>Cosa guardi oggi?</h2>

    <div class="genres">
      <label><input type="checkbox" value="35"> Comico</label>
      <label><input type="checkbox" value="28"> Azione</label>
      <label><input type="checkbox" value="10749"> Romantico</label>
      <label><input type="checkbox" value="16"> Cartoni animati</label>
    </div>

    <button class="primary" onclick="search()">Trova film</button>
  </div>

  <!-- RISULTATI -->
  <div class="card result" id="results">
    <h2 id="title"></h2>
    <img id="poster" class="poster">
    <p id="overview"></p>
    <button class="secondary" onclick="exitApp()">Chiudi</button>
  </div>

</div>

<!-- FADE -->
<div class="fade" id="fade">
  Sta iniziando il filmâ€¦
</div>

<script>
const API_KEY = "f8ecb75282e8dcea2d4845598cc7d030";
const IMG = "https://image.tmdb.org/t/p/w500";

function openBasic(){
  document.getElementById("home").style.display="none";
  document.getElementById("basic").style.display="block";
}

function search(){
  const checked=[...document.querySelectorAll("input:checked")].map(c=>c.value);
  if(checked.length===0){ alert("Seleziona almeno un genere"); return; }

  fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${API_KEY}&language=it-IT&with_genres=${checked.join(",")}&include_adult=false`)
    .then(r=>r.json())
    .then(d=>{
      if(!d.results || d.results.length===0){
        alert("Nessun risultato trovato");
        return;
      }
      const m=d.results[Math.floor(Math.random()*d.results.length)];
      document.getElementById("basic").style.display="none";
      document.getElementById("results").style.display="block";
      document.getElementById("title").innerText=m.title;
      document.getElementById("poster").src=m.poster_path?IMG+m.poster_path:"";
      document.getElementById("overview").innerText=m.overview.split(".")[0]+".";
    });
}

function exitApp(){
  const f=document.getElementById("fade");
  f.style.display="flex";
  setTimeout(()=>{
    f.style.display="none";
    document.getElementById("results").style.display="none";
    document.getElementById("home").style.display="block";
  },2000);
}
</script>

</body>
</html>
